"use strict";(self["webpackChunkframeo_web"]=self["webpackChunkframeo_web"]||[]).push([[704],{6704:(e,i,o)=>{o.r(i),o.d(i,{default:()=>C});var t=o(9835),n=o(6970);const a={id:"content-pane"},r={id:"media-box"},s={class:"media"},d={id:"date"};function c(e,i,o,c,l,u){const m=(0,t.up)("image-display"),h=(0,t.up)("video-display"),p=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(p,{class:"flex flex-center"},{default:(0,t.w5)((()=>[(0,t._)("div",a,[(0,t._)("div",r,[(0,t._)("div",s,[(0,t.Wm)(m,{class:(0,n.C_)({fade:!0,"fade-in":e.displayImage}),ref:"imageDisplay",onLoad:e.onMediaLoad},null,8,["class","onLoad"]),(0,t.Wm)(h,{class:(0,n.C_)({fade:!0,"fade-in":!e.displayImage}),ref:"videoDisplay",onLoad:e.onMediaLoad},null,8,["class","onLoad"]),(0,t._)("div",d,(0,n.zw)(e.currentDate),1)])])])])),_:1})}const l={id:"container"},u=["src"];function m(e,i,o,a,r,s){return(0,t.wg)(),(0,t.iD)("div",l,[(0,t._)("div",{id:"backdrop",style:(0,n.j5)({backgroundImage:"url("+e.currentSource+")"})},null,4),(0,t._)("img",{id:"image-main",src:e.currentSource,class:(0,n.C_)({fade:!0,"fade-out":e.doTransition})},null,10,u)])}const h=(0,t.aZ)({name:"ImageDisplay",emits:["load"],data(){return{currentSource:"",nextSource:"",transitionSource:"",doTransition:!1}},methods:{onImageLoad(){this.$emit("load"),this.transitionSource=this.nextSource,this.doTransition=!0,setTimeout(this.onAfterEnter,100)},onAfterEnter(){const e=this.currentSource;this.currentSource=this.transitionSource,this.transitionSource=e,this.doTransition=!1},stop(){console.log("Stop image display"),this.currentSource=null},start(e){console.log(`Start load image ${e}`);const i=new Image;i.onload=this.onImageLoad,i.onerror=null,i.src=this.nextSource=e}}});var p=o(1639);const v=(0,p.Z)(h,[["render",m],["__scopeId","data-v-4a069069"]]),g=v;o(702);var f=o(1957);const y={id:"container"},S=["src"];function _(e,i,o,n,a,r){const s=(0,t.up)("q-spinner");return(0,t.wg)(),(0,t.iD)("div",y,[(0,t.wy)((0,t.Wm)(s,{id:"spinner",color:"primary",size:"3em",thickness:10},null,512),[[f.F8,e.loading]]),(0,t._)("video",{id:"video",ref:"video",muted:"",autoplay:"",loop:"",onLoadeddata:i[0]||(i[0]=(...i)=>e.onVideoLoad&&e.onVideoLoad(...i))},[(0,t._)("source",{src:e.source,type:"video/mp4"},null,8,S)],544)])}const I=(0,t.aZ)({name:"VideoDisplay",emits:["load"],data(){return{source:null,loading:!1}},computed:{video(){return this.$refs.video}},methods:{onVideoLoad(){this.$emit("load"),this.loading=!1,this.video.currentTime=0,this.video.play()},stop(){console.log("Stop video display"),this.video.pause()},start(e){console.log(`Start load video ${e}`),this.loading=!0,this.source=e,this.video.load()}}});var x=o(3940),D=o(9984),L=o.n(D);const w=(0,p.Z)(I,[["render",_],["__scopeId","data-v-35c8f8f3"]]),$=w;L()(I,"components",{QSpinner:x.Z});var Z=o(1644);const b=(0,t.aZ)({components:{ImageDisplay:g,VideoDisplay:$},name:"IndexPage",data(){return{displayImage:!0,mounted:!1}},computed:{mediaStore(){return(0,Z.Z)()},media(){return this.mediaStore.media},currentIndex(){return this.mounted?this.mediaStore.currentIndex:-1},currentMedia(){return this.media[this.currentIndex]},currentDate(){const e=this.currentMedia;if(void 0===e)return;const i={weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},o=new Date(e.date),t=o.toLocaleDateString("nl-NL",i).toString();return t.charAt(0).toUpperCase()+t.slice(1)}},mounted(){this.mounted=!0},watch:{media:{handler(e){},deep:!0},currentIndex:{handler(e,i){var o,t;if(console.log(`Current Index changed from ${i} -> ${e}`),e<0)return;const n=this.media[e];if(void 0===n)return;const a=this.media[i],r=void 0===a||a.is_video!==n.is_video;var s;(console.log(`Media changed from ${JSON.stringify(a)} -> ${JSON.stringify(n)}`),r&&n.is_video&&(null===(o=this.$refs.videoDisplay)||void 0===o||o.stop()),r&&!n.is_video&&(null===(t=this.$refs.imageDisplay)||void 0===t||t.stop()),this.displayImage=!n.is_video,console.log(`Is video: ${n.is_video}`),this.displayImage)?this.$refs.imageDisplay.start(n.url):null===(s=this.$refs.videoDisplay)||void 0===s||s.start(n.url)}}},methods:{nextMedia(){this.mediaStore.nextIndex()},onMediaLoad(){this.timer=setTimeout((()=>this.nextMedia()),4e3)}}});var k=o(9885);const M=(0,p.Z)(b,[["render",c],["__scopeId","data-v-3b6c9d12"]]),C=M;L()(b,"components",{QPage:k.Z})}}]);