"use strict";(self["webpackChunkframeo_web"]=self["webpackChunkframeo_web"]||[]).push([[499],{9897:(e,i,t)=>{t.r(i),t.d(i,{default:()=>q});var o=t(9835),a=t(6970);const n=e=>((0,o.dD)("data-v-5aa02ab6"),e=e(),(0,o.Cn)(),e),d={id:"content-pane"},r={id:"media-box"},s=n((()=>(0,o._)("div",{id:"click-box"},null,-1))),l={class:"media"},c={class:"media"};function u(e,i,t,n,u,m){const p=(0,o.up)("image-display"),v=(0,o.up)("video-display"),h=(0,o.up)("DateBlock"),g=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(g,{class:"flex flex-center"},{default:(0,o.w5)((()=>{var i;return[(0,o._)("div",d,[(0,o._)("div",r,[s,(0,o._)("div",l,[(0,o.Wm)(p,{class:(0,a.C_)({fade:!0,"fade-in":e.displayImage}),ref:"imageDisplay",onLoad:e.onMediaLoad},null,8,["class","onLoad"])]),(0,o._)("div",c,[(0,o.Wm)(v,{class:(0,a.C_)({fade:!0,"fade-in":!e.displayImage}),ref:"videoDisplay",onLoad:e.onMediaLoad},null,8,["class","onLoad"])]),(0,o.Wm)(h,{id:"date",value:null===(i=e.currentMedia)||void 0===i?void 0:i.date},null,8,["value"])])])]})),_:1})}const m={id:"container"},p=["src"];function v(e,i,t,n,d,r){return(0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("div",{id:"backdrop",style:(0,a.j5)({backgroundImage:"url("+e.currentSource+")"})},null,4),(0,o._)("img",{id:"image-main",src:e.currentSource,class:(0,a.C_)({fade:!0,"fade-out":e.doTransition})},null,10,p)])}const h=(0,o.aZ)({name:"ImageDisplay",emits:["load"],data(){return{currentSource:"",nextSource:"",transitionSource:"",doTransition:!1}},methods:{onImageLoad(){this.$emit("load"),this.transitionSource=this.nextSource,this.doTransition=!0,setTimeout(this.onAfterEnter,100)},onAfterEnter(){const e=this.currentSource;this.currentSource=this.transitionSource,this.transitionSource=e,this.doTransition=!1},stop(){console.log("Stop image display"),this.currentSource=null},start(e){console.log(`Start load image ${e}`);const i=new Image;i.onload=this.onImageLoad,i.onerror=null,i.src=this.nextSource=e}}});var g=t(1639);const f=(0,g.Z)(h,[["render",v],["__scopeId","data-v-765a482c"]]),y=f;t(702);var _=t(1957);const S={id:"container"},I={id:"spinner"},x=["src"];function D(e,i,t,a,n,d){const r=(0,o.up)("q-spinner");return(0,o.wg)(),(0,o.iD)("div",S,[(0,o.wy)((0,o._)("div",I,[(0,o.Wm)(r,{color:"primary",size:"3em",thickness:10})],512),[[_.F8,e.loading]]),(0,o._)("video",{id:"video",ref:"video",muted:"",autoplay:"",loop:"",onLoadeddata:i[0]||(i[0]=(...i)=>e.onVideoLoad&&e.onVideoLoad(...i))},[(0,o._)("source",{src:e.source,type:"video/mp4"},null,8,x)],544)])}const w=(0,o.aZ)({name:"VideoDisplay",emits:["load"],data(){return{source:null,loading:!1}},computed:{video(){return this.$refs.video}},methods:{onVideoLoad(){this.$emit("load"),this.loading=!1,this.video.currentTime=0,this.video.play()},stop(){console.log("Stop video display"),this.video.pause()},start(e){console.log(`Start load video ${e}`),this.loading=!0,this.source=e,this.video.load()}}});var L=t(3940),$=t(9984),k=t.n($);const Z=(0,g.Z)(w,[["render",D],["__scopeId","data-v-215934e2"]]),b=Z;k()(w,"components",{QSpinner:L.Z});var C=t(1644);const M={id:"date"};function T(e,i,t,n,d,r){return(0,o.wg)(),(0,o.iD)("div",M,(0,a.zw)(e.text),1)}const V=(0,o.aZ)({name:"DateBlock",props:{value:{type:String,default:null}},computed:{text(){if(null===this.value)return null;const e={weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},i=new Date(this.value.toString()),t=i.toLocaleDateString("nl-NL",e).toString();return t.charAt(0).toUpperCase()+t.slice(1)}}}),W=(0,g.Z)(V,[["render",T],["__scopeId","data-v-469ff13c"]]),A=W,B=(0,o.aZ)({components:{ImageDisplay:y,VideoDisplay:b,DateBlock:A},name:"IndexPage",data(){return{displayImage:!0,mounted:!1}},computed:{mediaStore(){return(0,C.Z)()},media(){return this.mediaStore.media},currentIndex(){return this.mounted?this.mediaStore.currentIndex:-1},currentMedia(){return this.media[this.currentIndex]}},mounted(){this.mounted=!0},watch:{currentIndex:{handler(e,i){var t,o;if(console.log(`Current Index changed from ${i} -> ${e}`),e<0)return;const a=this.media[e];if(void 0===a)return;const n=this.media[i],d=void 0===n||n.is_video!==a.is_video;var r;(console.log(`Media changed from ${JSON.stringify(n)} -> ${JSON.stringify(a)}`),d&&a.is_video&&(null===(t=this.$refs.videoDisplay)||void 0===t||t.stop()),d&&!a.is_video&&(null===(o=this.$refs.imageDisplay)||void 0===o||o.stop()),this.displayImage=!a.is_video,console.log(`Is video: ${a.is_video}`),this.displayImage)?this.$refs.imageDisplay.start(a.url):null===(r=this.$refs.videoDisplay)||void 0===r||r.start(a.url)}}},methods:{nextMedia(){this.mediaStore.nextIndex()},onMediaLoad(){this.timer=setTimeout((()=>this.nextMedia()),8e3)}}});var N=t(9885);const j=(0,g.Z)(B,[["render",u],["__scopeId","data-v-5aa02ab6"]]),q=j;k()(B,"components",{QPage:N.Z})}}]);